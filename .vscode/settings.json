{
	// ==================== TypeScript Language Server Settings ====================
	// Force VSCode to use the workspace TypeScript version (prevents version mismatches)
	"typescript.tsdk": "node_modules/typescript/lib",
	"typescript.enablePromptUseWorkspaceTsdk": true,

	// Aggressive TypeScript server restart and cache clearing
	"typescript.tsserver.maxTsServerMemory": 8192,
	"typescript.tsserver.experimental.enableProjectDiagnostics": false,
	"typescript.disableAutomaticTypeAcquisition": false,

	// Auto-restart TS server on config changes to prevent stale errors
	"typescript.tsserver.watchOptions": {
		"watchFile": "useFsEvents",
		"watchDirectory": "useFsEvents",
		"fallbackPolling": "dynamicPriorityPolling"
	},

	// Enable more aggressive diagnostics updates
	"typescript.updateImportsOnFileMove.enabled": "always",
	"typescript.preferences.autoImportFileExcludePatterns": [
		"**/routeTree.gen.ts"
	],

	// JavaScript/TypeScript validation
	"javascript.validate.enable": true,
	"typescript.validate.enable": true,

	// ==================== File Watching & Performance ====================
	"files.watcherExclude": {
		"**/routeTree.gen.ts": true,
		"**/.git/objects/**": true,
		"**/.git/subtree-cache/**": true,
		"**/node_modules/**": true,
		"**/.convex/**": true,
		"**/dist/**": true,
		"**/.next/**": true
	},
	"search.exclude": {
		"**/routeTree.gen.ts": true,
		"**/node_modules": true,
		"**/dist": true,
		"**/.convex": true
	},
	"files.readonlyInclude": {
		"**/routeTree.gen.ts": true
	},

	// Prevent VSCode from auto-saving too aggressively (can cause TS server confusion)
	"files.autoSave": "onFocusChange",

	// ==================== Biome Formatter Settings ====================
	"[javascript]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[javascriptreact]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[typescript]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[typescriptreact]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[json]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[jsonc]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"[css]": {
		"editor.defaultFormatter": "biomejs.biome"
	},
	"editor.codeActionsOnSave": {
		"source.organizeImports.biome": "explicit",
		"source.fixAll.biome": "explicit",
		"source.organizeImports": "never"
	},

	// ==================== Editor Settings ====================
	// Format on save to ensure consistency
	"editor.formatOnSave": true,

	// Disable quick suggestions in strings/comments to reduce TS server load
	"editor.quickSuggestions": {
		"strings": false
	}
}
